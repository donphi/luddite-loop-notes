# Reflecting on Feature Extraction


## Content


### Main Pipeline of Feature Extraction


5 Pass Extraction



| Pass
   | Goal
                        | Method
                                           | Prompt/No Prompt
                 | Validation
                           | Output
                                         |
| ------- | ---------------------------- | ------------------------------------------------- | --------------------------------- | ------------------------------------- | ----------------------------------------------- |
| Pass 1
 | Section Normalization
       | Rule-based classifier
                            | No prompt
                        | Pattern matching
                     | Standardized section labels
                    |
| 
       | Map variations → standard
   | "Materials and Methods" → "methods"
              | 
                                 | Check against standard sections
      | section_type: methods/results/intro/discussion
 |
| 
       | 
                            | "Study Population" → "methods"
                   | 
                                 | 
                                     | section_confidence: 0.0-1.0
                    |
| 
       | 
                            | "Statistical Analysis" → "methods"
               | 
                                 | 
                                     | 
                                               |
| Pass 2
 | Medical Entity Extraction
   | HunFlair2
                                        | No prompt
                        | Frequency + position filtering
       | medical_entities: []
                           |
| 
       | Raw medical NER
             | Direct model application
                         | 
                                 | ≥2 mentions in paper
                 | Disease, Gene, Chemical, Species, Cell line
    |
| 
       | 
                            | 
                                                 | 
                                 | Proximity to key terms
               | Confidence scores per entity
                   |
| Pass 3
 | UK Biobank Features
         | Hybrid approach
                                  | WITH prompt
                      | Cosine similarity
                    | ukb_features: []
                               |
| 
       | Extract field codes + names
 | 1. Regex: Field_XXXXX patterns
                   | 
                                 | Similarity >0.85 to known fields
     | Field codes + descriptions
                     |
| 
       | 
                            | 2. LLM prompt: "Extract UK Biobank measurements"
 | 
                                 | Validate against official field list
 | Usage context (measured/analyzed)
              |
| 
       | 
                            | 3. Semantic search for feature names
             | 
                                 | 
                                     | 
                                               |
| Pass 4
 | Ontology Mapping
            | Knowledge base lookup
                            | No prompt
                        | Direct database match
                | ontology_codes: []
                             |
| 
       | Map entities → codes
        | UMLS MetaMap or scispaCy
                         | 
                                 | Exact or fuzzy match
                 | ICD-10, SNOMED-CT, UMLS CUIs
                   |
| 
       | 
                            | Take Pass 2 entities → ontology
                  | 
                                 | Ambiguity resolution
                 | MeSH terms
                                     |
| 
       | 
                            | 
                                                 | 
                                 | 
                                     | HPO, OMIM codes
                                |
| Pass 5
 | Semantic & Discovery Tags
   | Multi-model extraction
                           | WITH prompts
                     | Context validation
                   | All remaining tags
                             |
| 
       | Statistical measures
        | Regex + BioBERT
                                  | Prompt for complex stats
         | Numerical format check
               | p-values, CIs, effect sizes
                    |
| 
       | Study design
                | BioMistral classification
                        | "Identify study design type"
     | Confidence >0.7
                      | cohort, RCT, case-control
                      |
| 
       | Algorithms
                  | Keyword + LLM
                                    | "Extract ML/statistical methods"
 | ML taxonomy check
                    | Random Forest, Cox regression
                  |
| 
       | Research gaps
               | Semantic search
                                  | "Find knowledge gaps stated"
     | Gap indicator words
                  | Unknown areas
                                  |
| 
       | Unexplored features
         | Contrastive logic
                                | Compare intro vs methods
         | Cross-section validation
             | Mentioned but not used
                         |
| 
       | Method opportunities
        | LLM extraction
                                   | "Find suggested future methods"
  | Future tense patterns
                | Could be applied
                               |






### UK Biobank Feature Extraction Detail (Pass 3)


| Extraction Method
   | Example
                                                                   | Validation
                          |
| -------------------- | -------------------------------------------------------------------------- | ------------------------------------ |
| Regex patterns
      | "Field 20002", "field_20002"
                                              | Exact field code match
              |
| Known feature names
 | "body mass index", "grip strength"
                                        | Cosine similarity to official names
 |
| Semantic variants
   | "BMI", "hand grip"
                                                        | Embedding similarity >0.85
          |
| LLM prompt
          | "Extract all UK Biobank measurements and their field codes from: {chunk}"
 | Validate against field dictionary
   |


### **Quality Control by Pass**


| Pass
   | Quality Metric
                    | Threshold
                       | Fallback Strategy
               |
| ------- | ---------------------------------- | -------------------------------- | -------------------------------- |
| Pass 1
 | Section classification confidence
 | >0.8
                            | Mark as "unknown_section"
       |
| Pass 2
 | HunFlair entity confidence
        | >0.85
                           | Discard low-confidence entities
 |
| Pass 3
 | UK Biobank field validation
       | Exact match or >0.85 similarity
 | Flag for manual review
          |
| Pass 4
 | Ontology mapping coverage
         | >60% entities mapped
            | Use broader ontology matching
   |
| Pass 5
 | LLM extraction confidence
         | >0.7
                            | Use rule-based fallback
         |





