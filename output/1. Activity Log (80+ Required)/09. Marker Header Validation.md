# Marker Header Validation


## Content


### Objective


Validate YAML frontmatter in all Markdown files from the UK Biobank PDF conversion. Ensures every file has required metadata before chunking and tagging. Acts as a QC checkpoint to prevent downstream failures.







---


### Process

1. **Containerized Check**
    - Python 3.11 in Docker, orchestrated with docker-compose.
    - Markdown directory mounted read-only.
2. **Validation Logic**
    - Detect YAML frontmatter (`--`â€¦`--` within 30 lines).
    - Confirm required fields (`original_file`).
    - Categorize errors and produce stats.
3. **Output**
    - JSON reports with timestamp.
    - Console summary with % valid vs invalid.
    - Detailed error samples logged.

    



---


### Validation


Reports include:


- Total files processed.
- Valid vs invalid counts.
- Validation percentage.
- Error breakdown with sample files.





---


### Reflection

- Lightweight QC but critical before heavy chunking/tagging.
- Containerization ensures reproducibility.
- Most failures traced to missing or malformed frontmatter.
- Script is fast, minimal, and dependency-free.





---


### Next Step


Proceed to data_conversion/ukb/4_tagging/1_chunk/:


- Break Markdown into structured chunks.
- Preserve document hierarchy.
- Prepare data for tagging.





---


### Technical Implementation

- **Libraries**: Python stdlib only (`os`, `pathlib`, `json`, `datetime`).
- **Dockerfile**: lightweight Python 3.11-slim with read-only volume mount.
