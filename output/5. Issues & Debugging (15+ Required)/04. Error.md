# Error


## Content


# Bug Report: Wayland Freeze after Ubuntu 25 Update


### Overview


After applying system updates on Ubuntu 25, the workstation exhibited a consistent freeze when logging into GNOME Wayland. The freeze occurred within 3–5 seconds after session start, forcing a hard reboot and halting all research workflows. This issue was reproducible across multiple boots and posed a critical blocker for ongoing dissertation tasks.



### Symptom Description (basic user view)

- System boots normally.
- Login screen accepts credentials.
- Desktop loads, mouse moves briefly, then entire system freezes.
- Requires hard reset; no automatic recovery.

### Technical Root Cause (advanced user view)

- Logs indicated **NVIDIA driver regression** with `nvidia-driver-570-open 570.169`.
- Kernel logs showed:
    - `NVRM: _kgspBootGspRm ... GPU likely in a bad state`
    - `RmInitAdapter failed`
    - Multiple `AMD-Vi: IO_PAGE_FAULT` entries.
- These confirm a **driver + IOMMU incompatibility** in the new release, breaking Wayland initialization.
- Xorg sessions remained functional, further narrowing the fault to the NVIDIA Wayland path.

### Fixes Applied

1. **Immediate Workaround**: Logged in via GNOME on Xorg (stable but not ideal for workflow).
2. **Verification**: Confirmed NVIDIA was active with `nvidia-smi` and validated GPU logs via `journalctl`.
3. **Resolution**: Downgraded the entire `nvidia-driver-570-open` stack from `570.169` to the previous stable release `570.133.07-0ubuntu2`.

    

    ~~~bash
    sudo apt-get install -t plucky nvidia-driver-570-open=570.133.07-0ubuntu2 ...
    sudo apt-mark hold nvidia-driver-570-open
    
    ~~~
    
    

4. Post-downgrade, Wayland sessions ran without GPU lockups.

### Prevention Measures

- **Hold packages** (`apt-mark hold`) to prevent silent upgrades of critical GPU drivers.
- Maintain an **Xorg fallback** session available for rapid recovery.
- Regularly capture and archive system logs when regressions occur for traceability.
- For production-critical research, prefer **proprietary NVIDIA driver track** (`nvidia-driver-570`) over `open` to avoid experimental regressions.

### Reflection


This incident highlighted how low-level driver regressions can propagate rapidly into user-facing failures, halting scientific workflows. Even with cutting-edge hardware, stability is dictated by the software stack. For research continuity, proactive measures—such as pinning package versions, maintaining rollback strategies, and documenting failures—are essential.



From a research methodology perspective, recording these disruptions is not just troubleshooting but part of the real-world reproducibility story. It shows how technical environments can bias outcomes if not managed, and why transparent reporting of failures is as important as reporting successful runs.











### Logbook Entry – NVIDIA Driver Regression & Rollback


Date: 24 August 2025



System: Ubuntu 25.04, AMD Threadripper Pro 7965WX, NVIDIA RTX 6000 Pro Blackwell



Issue:



After updating to nvidia-driver-570-open 570.169, GNOME Wayland froze within seconds of login. Kernel logs showed:


- `RmInitAdapter failed`
- repeated `AMD-Vi: IO_PAGE_FAULT`
- `Xwayland exited unexpectedly`

This halted GPU-accelerated workflows and prevented reproducibility of experiments.



Fix:


- Verified error via `journalctl -b -k`.
- Logged in via GNOME on Xorg as an immediate workaround.
- Downgraded full `nvidia-driver-570-open` stack from `570.169-0ubuntu0.25.04.1` → `570.133.07-0ubuntu2` using:

    

    ~~~bash
    sudo apt-get install --allow-downgrades --allow-change-held-packages -t plucky ...
    sudo apt-mark hold nvidia-driver-570-open nvidia-kernel-common-570 nvidia-utils-570 libnvidia-gl-570 libnvidia-compute-570
    ~~~
    
    





- Confirmed Wayland stable post-downgrade. `nvidia-smi` now reports `Driver Version: 570.133.07`.

Prevention:


- Key packages marked as held to block silent upgrades.
- Maintained Xorg as a fallback environment.
- Archived kernel and system logs for traceability.

Reflection:



Pinning the driver stack provided immediate stability on a very new GPU (RTX 6000 Pro Blackwell). This demonstrates how experimental open drivers can destabilise critical workflows. By documenting the regression and recovery, reproducibility is safeguarded, and risk management becomes part of the research methodology.






