# Reflecting on Feature Extraction


## Content


### Main Pipeline of Feature Extraction


5 Pass Extraction




<table>
  <thead>
    <tr>
      <th><strong>Pass</strong></th>
      <th><strong>Goal</strong></th>
      <th><strong>Method</strong></th>
      <th><strong>Prompt/No Prompt</strong></th>
      <th><strong>Validation</strong></th>
      <th><strong>Output</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Pass 1</strong></td>
      <td><strong>Section Normalization</strong></td>
      <td>Rule-based classifier</td>
      <td>No prompt</td>
      <td>Pattern matching</td>
      <td>Standardized section labels</td>
    </tr>
    <tr>
      <td></td>
      <td>Map variations → standard</td>
      <td>&quot;Materials and Methods&quot; → &quot;methods&quot;</td>
      <td></td>
      <td>Check against standard sections</td>
      <td><code>section_type</code>: methods/results/intro/discussion</td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td>&quot;Study Population&quot; → &quot;methods&quot;</td>
      <td></td>
      <td></td>
      <td><code>section_confidence</code>: 0.0-1.0</td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td>&quot;Statistical Analysis&quot; → &quot;methods&quot;</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><strong>Pass 2</strong></td>
      <td><strong>Medical Entity Extraction</strong></td>
      <td>HunFlair2</td>
      <td><strong>No prompt</strong></td>
      <td>Frequency + position filtering</td>
      <td><code>medical_entities</code>: []</td>
    </tr>
    <tr>
      <td></td>
      <td>Raw medical NER</td>
      <td>Direct model application</td>
      <td></td>
      <td>≥2 mentions in paper</td>
      <td>Disease, Gene, Chemical, Species, Cell line</td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td>Proximity to key terms</td>
      <td>Confidence scores per entity</td>
    </tr>
    <tr>
      <td><strong>Pass 3</strong></td>
      <td><strong>UK Biobank Features</strong></td>
      <td>Hybrid approach</td>
      <td><strong>WITH prompt</strong></td>
      <td>Cosine similarity</td>
      <td><code>ukb_features</code>: []</td>
    </tr>
    <tr>
      <td></td>
      <td>Extract field codes + names</td>
      <td>1. Regex: Field_XXXXX patterns</td>
      <td></td>
      <td>Similarity &gt;0.85 to known fields</td>
      <td>Field codes + descriptions</td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td>2. LLM prompt: &quot;Extract UK Biobank measurements&quot;</td>
      <td></td>
      <td>Validate against official field list</td>
      <td>Usage context (measured/analyzed)</td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td>3. Semantic search for feature names</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td><strong>Pass 4</strong></td>
      <td><strong>Ontology Mapping</strong></td>
      <td>Knowledge base lookup</td>
      <td><strong>No prompt</strong></td>
      <td>Direct database match</td>
      <td><code>ontology_codes</code>: []</td>
    </tr>
    <tr>
      <td></td>
      <td>Map entities → codes</td>
      <td>UMLS MetaMap or scispaCy</td>
      <td></td>
      <td>Exact or fuzzy match</td>
      <td>ICD-10, SNOMED-CT, UMLS CUIs</td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td>Take Pass 2 entities → ontology</td>
      <td></td>
      <td>Ambiguity resolution</td>
      <td>MeSH terms</td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td>HPO, OMIM codes</td>
    </tr>
    <tr>
      <td><strong>Pass 5</strong></td>
      <td><strong>Semantic &amp; Discovery Tags</strong></td>
      <td>Multi-model extraction</td>
      <td><strong>WITH prompts</strong></td>
      <td>Context validation</td>
      <td>All remaining tags</td>
    </tr>
    <tr>
      <td></td>
      <td><strong>Statistical measures</strong></td>
      <td>Regex + BioBERT</td>
      <td>Prompt for complex stats</td>
      <td>Numerical format check</td>
      <td>p-values, CIs, effect sizes</td>
    </tr>
    <tr>
      <td></td>
      <td><strong>Study design</strong></td>
      <td>BioMistral classification</td>
      <td>&quot;Identify study design type&quot;</td>
      <td>Confidence &gt;0.7</td>
      <td>cohort, RCT, case-control</td>
    </tr>
    <tr>
      <td></td>
      <td><strong>Algorithms</strong></td>
      <td>Keyword + LLM</td>
      <td>&quot;Extract ML/statistical methods&quot;</td>
      <td>ML taxonomy check</td>
      <td>Random Forest, Cox regression</td>
    </tr>
    <tr>
      <td></td>
      <td><strong>Research gaps</strong></td>
      <td>Semantic search</td>
      <td>&quot;Find knowledge gaps stated&quot;</td>
      <td>Gap indicator words</td>
      <td>Unknown areas</td>
    </tr>
    <tr>
      <td></td>
      <td><strong>Unexplored features</strong></td>
      <td>Contrastive logic</td>
      <td>Compare intro vs methods</td>
      <td>Cross-section validation</td>
      <td>Mentioned but not used</td>
    </tr>
    <tr>
      <td></td>
      <td><strong>Method opportunities</strong></td>
      <td>LLM extraction</td>
      <td>&quot;Find suggested future methods&quot;</td>
      <td>Future tense patterns</td>
      <td>Could be applied</td>
    </tr>
  </tbody>
</table>







### UK Biobank Feature Extraction Detail (Pass 3)



<table>
  <thead>
    <tr>
      <th><strong>Extraction Method</strong></th>
      <th><strong>Example</strong></th>
      <th><strong>Validation</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Regex patterns</strong></td>
      <td>&quot;Field 20002&quot;, &quot;field_20002&quot;</td>
      <td>Exact field code match</td>
    </tr>
    <tr>
      <td><strong>Known feature names</strong></td>
      <td>&quot;body mass index&quot;, &quot;grip strength&quot;</td>
      <td>Cosine similarity to official names</td>
    </tr>
    <tr>
      <td><strong>Semantic variants</strong></td>
      <td>&quot;BMI&quot;, &quot;hand grip&quot;</td>
      <td>Embedding similarity &gt;0.85</td>
    </tr>
    <tr>
      <td><strong>LLM prompt</strong></td>
      <td>&quot;Extract all UK Biobank measurements and their field codes from: {chunk}&quot;</td>
      <td>Validate against field dictionary</td>
    </tr>
  </tbody>
</table>



### **Quality Control by Pass**



<table>
  <thead>
    <tr>
      <th><strong>Pass</strong></th>
      <th><strong>Quality Metric</strong></th>
      <th><strong>Threshold</strong></th>
      <th><strong>Fallback Strategy</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Pass 1</td>
      <td>Section classification confidence</td>
      <td>&gt;0.8</td>
      <td>Mark as &quot;unknown_section&quot;</td>
    </tr>
    <tr>
      <td>Pass 2</td>
      <td>HunFlair entity confidence</td>
      <td>&gt;0.85</td>
      <td>Discard low-confidence entities</td>
    </tr>
    <tr>
      <td>Pass 3</td>
      <td>UK Biobank field validation</td>
      <td>Exact match or &gt;0.85 similarity</td>
      <td>Flag for manual review</td>
    </tr>
    <tr>
      <td>Pass 4</td>
      <td>Ontology mapping coverage</td>
      <td>&gt;60% entities mapped</td>
      <td>Use broader ontology matching</td>
    </tr>
    <tr>
      <td>Pass 5</td>
      <td>LLM extraction confidence</td>
      <td>&gt;0.7</td>
      <td>Use rule-based fallback</td>
    </tr>
  </tbody>
</table>






