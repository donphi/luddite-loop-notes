# NER Selection for Disease extraction


## Content


# 1. Objective and Scope


### 1.1 The Challenge: Grounding Mentions to Showcase Features


We are processing a frozen corpus of UK Biobank papers (up to July 2025). The goal is to move beyond simple entity tagging to a Deterministic Disease-Feature Map. We must distinguish between the "Primary Focus" of a paper and secondary phenotypes, then bridge these to the actual UKB Showcase feature set (e.g., blood biomarkers, lifestyle variables, or genotypic data-fields).









~~~{=html}
<pre class="notion-ascii-diagram"><code><strong>THE IMPLEMENTATION ARC:</strong>
┌────────────────────────┐      ┌───────────────────────┐      ┌───────────────────────┐
│  <strong>Corpus (Frozen) </strong>      │      │  <strong>NER Triangulation  </strong>  │      │  <strong>UKB Feature Map   </strong>   │
│  Papers thru July 2025 ├─────►│  (MedCAT + Witnesses) ├─────►│  Showcase Integration │
│  (Title, Para, Tables) │      │  Normalized Entities  │      │   (10k Feature Set)   │
└────────────────────────┘      └──────────┬────────────┘      └───────────────────────┘
                                           │
                                           ▼
                               <strong> ELASTIC SEARCH + SPECTOR2</strong>
                              (Linking Diseases to Features)</code></pre>
~~~

~~~{=latex}
\begin{Verbatim}[commandchars=\\\{\}]
\textbf{THE IMPLEMENTATION ARC:}
┌────────────────────────┐      ┌───────────────────────┐      ┌───────────────────────┐
│  \textbf{Corpus (Frozen) }      │      │  \textbf{NER Triangulation  }  │      │  \textbf{UKB Feature Map   }   │
│  Papers thru July 2025 ├─────►│  (MedCAT + Witnesses) ├─────►│  Showcase Integration │
│  (Title, Para, Tables) │      │  Normalized Entities  │      │   (10k Feature Set)   │
└────────────────────────┘      └──────────┬────────────┘      └───────────────────────┘
                                           │
                                           ▼
                               \textbf{ ELASTIC SEARCH + SPECTOR2}
                              (Linking Diseases to Features)
\end{Verbatim}
~~~








---


## 2. Methods and Process


### 2.1 NER Selection: Rationalizing the Choices


We selected three specific NERs based on their ability to handle the requirements of high clinical validity, backed by redundant academic and zero-shot witnesses.








<table>
  <thead>
    <tr>
      <th><strong>Candidate NER</strong></th>
      <th><strong>Status</strong></th>
      <th><strong>Rationale for Selection / Rejection</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>MedCAT v2</strong></td>
      <td><strong>MAIN</strong></td>
      <td><strong>Selected.</strong> Directly supports <strong>SNOMED-CT UK</strong>. It aligns extracted text with the exact clinical codes used in UKB medical record linkages.</td>
    </tr>
    <tr>
      <td><strong>BERN2</strong></td>
      <td><strong>WITNESS 1</strong></td>
      <td><strong>Selected.</strong> SOTA for multi-type recognition (Diseases + Genes). High precision in academic Discussion sections where diseases are often discussed as covariates.</td>
    </tr>
    <tr>
      <td><strong>GLiNER-BioMed</strong></td>
      <td><strong>WITNESS 2</strong></td>
      <td><strong>Selected.</strong> Zero-shot architecture allows us to find disease spans in <strong>Table Columns</strong> that fixed-vocabulary models (like BERT) often truncate.</td>
    </tr>
    <tr>
      <td><em>Scispacy</em></td>
      <td><em>Rejected</em></td>
      <td>Lacks the 2025 contextual depth; struggles with disambiguation in UKB&#39;s complex clinical-academic hybrid text.</td>
    </tr>
    <tr>
      <td><em>BioGPT</em></td>
      <td><em>Rejected</em></td>
      <td>Generative nature introduces &quot;hallucination&quot; risk; not deterministic enough for a PhD-level feature-mapping pipeline.</td>
    </tr>
    <tr>
      <td><em>Spark NLP</em></td>
      <td><em>Rejected</em></td>
      <td>While powerful, it requires high-overhead infrastructure (Spark clusters) that exceeds our &quot;Simplest Complex&quot; self-hosting requirement.</td>
    </tr>
  </tbody>
</table>



### 2.2 Feature Mapping with Elastic Search


We used Elastic Search to store both our normalised diseases and the 10,000 UKB Showcase features.Elastic Search10,000 UKB Showcase features


- **The Process:** We performed a semantic join. If "Type 2 Diabetes" is identified as the main disease, we use Elastic Search to query the most likely related features (for example, Data-Field 30700: HbA1c) found in the same figure or table.
- **SPECTOR2:** We use this to ensure the "Semantic Anchor" is correct. If a paper mentions "HbA1c" and "Metformin”, SPECTOR2 confirms these are statistically and semantically relevant to "Diabetes" rather than an accidental co-occurrence.





---


## 3. Key Technical Outcomes


### 3.1 Deterministic Alignment


By freezing the data in July 2025, we ensured a fixed reference point.


- **Showcase Mapping:** We mapped the entities to the **UKB Field IDs**. We map entities to UKB Field IDs
- **Metric:** Every "Main Disease" is assigned a confidence score based on frequency, location (title vs. paragraph), and consensus between the three NERs.

### 3.2 Data Flow




~~~{=html}
<pre class="notion-ascii-diagram"><code>┌───────────────────────────────────────────────────────────────────────┐
<strong>│                    FEATURE CO-OCCURRENCE LOGIC                        │
</strong>├───────────────────────────────────────────────────────────────────────┤
│                                                                       │
<strong>│   ENTITY LAYER (NER)                SHOWCASE LAYER (ES)               │
</strong>│   ────────────────────              ─────────────────────             │
│   <strong>MedCAT:</strong> &quot;Diabetes&quot; ──────────► <strong>ES Query:</strong> &quot;Field 30700&quot;              │
│   <strong>BERN2: </strong> &quot;T2DM&quot;     ──────────► <strong>ES Query:</strong> &quot;Field 2443&quot;               │
│                                                                       │
│                           │                                           │
│                           ▼                                           │
│                                                                       │
│   <strong>VALIDATION LAYER (SPECTOR2) </strong>                                        │
│   ──────────────────────────────                                      │
│   <strong>Check:</strong> Is &quot;Diabetes&quot; semantically linked to &quot;HbA1c&quot; in this paper?  │
│   Score &gt; 0.85 = Deterministic Mapping Accepted                       │
│                                                                       │
└───────────────────────────────────────────────────────────────────────┘</code></pre>
~~~

~~~{=latex}
\begin{Verbatim}[commandchars=\\\{\}]
┌───────────────────────────────────────────────────────────────────────┐
\textbf{│                    FEATURE CO-OCCURRENCE LOGIC                        │
}├───────────────────────────────────────────────────────────────────────┤
│                                                                       │
\textbf{│   ENTITY LAYER (NER)                SHOWCASE LAYER (ES)               │
}│   ────────────────────              ─────────────────────             │
│   \textbf{MedCAT:} "Diabetes" ──────────► \textbf{ES Query:} "Field 30700"              │
│   \textbf{BERN2: } "T2DM"     ──────────► \textbf{ES Query:} "Field 2443"               │
│                                                                       │
│                           │                                           │
│                           ▼                                           │
│                                                                       │
│   \textbf{VALIDATION LAYER (SPECTOR2) }                                        │
│   ──────────────────────────────                                      │
│   \textbf{Check:} Is "Diabetes" semantically linked to "HbA1c" in this paper?  │
│   Score > 0.85 = Deterministic Mapping Accepted                       │
│                                                                       │
└───────────────────────────────────────────────────────────────────────┘
\end{Verbatim}
~~~








---


## 4. Critical Reflection


### 4.1 Strengths

- **Coverage:** Capturing entities from tables/titles ensures that we do not miss "Table-only" phenotypes.
- **Clinical Integrity:** MedCAT ensures that our research "speaks the same language" as the UK NHS.
- **Scalability:** Elastic Search allows us to filter 10k features against 1,000s of papers in milliseconds.

### 4.2 Weaknesses and Risks

- **Indirect Matching:** We assumed that a feature mentioned in the same section as a disease was "used" for that disease.
- **Mitigation:** Use **Section-Header Awareness** (from your Stage G6 Extraction) to limit feature-disease association strictly to the "Results" and "Methods" sections.





---


## 5. Next Steps


### 2025 Pipeline Finalization

1. **Index UKB Showcase:** Import 10,000 feature descriptions into Elastic Search.
2. **Consensus Run:** Execute the NER Triangulation on the July 2025 frozen corpus.
3. **Distance Calculation:** Run SPECTOR2 embeddings on the "Extracted Feature Spans" vs "Normalized Disease Names" to prune low-confidence associations.
